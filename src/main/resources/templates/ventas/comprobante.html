<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/base}">
<head><title>Comprobante</title></head>
<body>
<div layout:fragment="content">
    <div class="max-w-2xl mx-auto my-8">
        <a href="/ventas" class="inline-flex items-center text-sm text-slate-500 hover:text-blue-600 mb-6 transition-colors no-print">
            <i class="fa-solid fa-arrow-left mr-2"></i> Volver
        </a>

        <div class="bg-white shadow-2xl rounded-sm border border-gray-200 p-10 relative overflow-hidden" id="ticket">
            <!-- Efecto papel rasgado decorativo (opcional con CSS puro o imagen) -->
            <div class="border-b-2 border-dashed border-gray-200 pb-6 mb-6 text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-blue-600 text-white rounded-full mb-4 shadow-lg">
                    <i class="fa-solid fa-paw text-3xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 tracking-wide uppercase">Patitas Felices</h1>
                <p class="text-gray-500 text-sm mt-1">Veterinaria & Pet Shop</p>
                <p class="text-xs text-gray-400 mt-2">RUC: 20123456789 | Av. Principal 123, Huancayo</p>
            </div>

            <div class="flex justify-between items-end mb-8 text-sm">
                <div>
                    <span class="block text-xs text-gray-400 uppercase tracking-wide">Cliente</span>
                    <span class="block font-bold text-gray-800 text-lg" th:if="${venta.propietario != null}" th:text="${venta.propietario.persona.nombres} + ' ' + ${venta.propietario.persona.apellidos}">Nombre</span>
                    <span class="block font-bold text-gray-800 text-lg" th:unless="${venta.propietario != null}">Cliente Casual</span>
                </div>
                <div class="text-right">
                    <span class="block text-xs text-gray-400 uppercase tracking-wide">Ticket N°</span>
                    <span class="block font-mono font-bold text-gray-800 text-lg" th:text="${venta.idVenta}">0001</span>
                    <span class="text-xs text-gray-500" th:text="${#temporals.format(venta.fechaVenta, 'dd/MM/yyyy HH:mm')}">Fecha</span>
                </div>
            </div>

            <table class="w-full text-sm mb-8">
                <thead class="bg-gray-50 text-gray-500 uppercase tracking-wider text-xs">
                <tr>
                    <th class="py-2 px-2 text-left">Desc</th>
                    <th class="py-2 px-2 text-center">Cant</th>
                    <th class="py-2 px-2 text-right">Unit</th>
                    <th class="py-2 px-2 text-right">Total</th>
                </tr>
                </thead>
                <tbody class="divide-y divide-gray-100">
                <tr th:each="det : ${venta.detalles}">
                    <td class="py-3 px-2 text-gray-800 font-medium">
                        <span th:if="${det.producto != null}" th:text="${det.producto.nombreProducto}"></span>
                    </td>
                    <td class="py-3 px-2 text-center text-gray-600" th:text="${det.cantidad}">1</td>
                    <td class="py-3 px-2 text-right text-gray-600" th:text="${det.precioUnitario}">10.00</td>
                    <td class="py-3 px-2 text-right font-bold text-gray-800" th:text="${det.precioUnitario * det.cantidad}">10.00</td>
                </tr>
                </tbody>
            </table>

            <div class="flex justify-end border-t-2 border-gray-800 pt-4">
                <div class="text-right">
                    <span class="block text-xs text-gray-500 uppercase tracking-wide mr-2">Total a Pagar</span>
                    <span class="text-3xl font-extrabold text-gray-900" th:text="'S/ ' + ${venta.total}">100.00</span>
                </div>
            </div>

            <div class="mt-10 text-center">
                <p class="text-xs text-gray-400 italic">¡Gracias por confiar en nosotros!</p>
                <div class="mt-2 text-xs font-mono text-gray-300">www.patitasfelices.com</div>
            </div>
        </div>

        <div class="text-center mt-8 no-print">
            <button onclick="window.print()" class="bg-slate-800 hover:bg-slate-900 text-white py-3 px-8 rounded-full shadow-lg transition-transform transform hover:-translate-y-1 flex items-center justify-center mx-auto gap-2">
                <i class="fa-solid fa-print"></i> Imprimir Ticket
            </button>
        </div>
    </div>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white; }
            #ticket { box-shadow: none; border: none; }
        }
    </style>
</div>
</body>
</html>